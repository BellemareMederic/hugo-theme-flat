<nav role=navigation>
    <ul class="menu">
        {{ $currentPage := . }}
        {{ range .Site.Menus.main }}
            {{ if .HasChildren }}
                <li class="menu-item has-child {{ if $currentPage.HasMenuCurrent "main" . }}active{{ end }}">
                        <span>{{ .Name }}</span>
                    <ul class="sub-menu">
                        {{ range .Children }}
                            <li class="sub-menu-item {{ if $currentPage.IsMenuCurrent "main" . }}active{{ end }}">
                                <a href="{{ .URL }}">{{ .Name }}</a>
                            </li>
                        {{ end }}
                    </ul>
                </li>
            {{ else }}
                <li class="menu-item">
                    <a href="{{ .URL }}">
                        <span>{{ .Name }}</span>
                    </a>
                </li>
            {{ end }}
        {{ end }}
    </ul>
</nav>